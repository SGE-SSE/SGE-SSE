<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SAI GANESH ELECTRICALS - SSE</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #fff;
    }
    header {
      background: #3f51b5;
      color: white;
      padding: 10px;
      text-align: center;
    }
    #search {
      display: block;
      width: 90%;
      margin: 15px auto;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    #results {
      max-width: 90%;
      margin: auto;
    }
    .item {
      padding: 8px;
      margin: 4px 0;
      border: 1px solid #ddd;
      border-radius: 6px;
      cursor: pointer;
    }
    .item:hover {
      background: #f0f0f0;
    }
    #selectedList {
      max-width: 90%;
      margin: 15px auto;
    }
    #selectedList .si {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 10px;
      border: 1px solid #eaeaea;
      border-radius: 8px;
      margin-top: 6px;
      background: #f8fcff;
      white-space: nowrap;
    }
    .rm {
      background: red;
      color: white;
      border: none;
      padding: 4px 10px;
      border-radius: 5px;
      cursor: pointer;
    }
    form {
      max-width: 90%;
      margin: 20px auto;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #fafafa;
    }
    form input, form textarea {
      display: block;
      width: 100%;
      margin-bottom: 10px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    form button {
      padding: 10px 15px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-right: 10px;
    }
    .whatsapp { background: #25d366; color: white; }
    .email { background: #3f51b5; color: white; }
  </style>
</head>
<body>
  <header>
    <h2>SAI GANESH ELECTRICALS - SSE</h2>
    <p>Prop: Dasari Krishna â€” Phone: 9885750657 â€” Email: krishnatsge@gmail.com</p>
    <p>Sales Executive: Vindoharsha â€” Email: vindoharsha12@gmail.com â€” WhatsApp: 7483362854</p>
  </header>

  <input type="text" id="search" placeholder="Type to search items (e.g. 1sqmm, 4sqmm, Conduit, fan)">
  <div id="results"></div>

  <h3 style="margin-left:5%;">Selected Items</h3>
  <div id="selectedList"></div>

  <form id="enquiryForm" action="https://formspree.io/f/xnnzygoz" method="POST">
    <h3>Customer Details & Send Enquiry</h3>
    <input type="text" name="name" placeholder="Your Name" required>
    <input type="tel" name="phone" placeholder="Your Phone" required>
    <input type="email" name="email" placeholder="Your Email" required>
    <textarea name="message" placeholder="Additional message (optional)"></textarea>
    <input type="hidden" name="selected" id="hiddenSelected">

    <button type="button" class="whatsapp" onclick="sendWhatsApp()">Send via WhatsApp</button>
    <button type="submit" class="email">Send via Email</button>
  </form>

  <script>
    let inventory = [];
    let selected = [];

    // Load items from Excel exported JSON (must include 'unit' column)
    fetch("cc.json")
      .then(res => res.json())
      .then(data => {
        inventory = data;
      });

    const search = document.getElementById("search");
    const results = document.getElementById("results");
    const selectedList = document.getElementById("selectedList");
    const hiddenSelectedField = document.getElementById("hiddenSelected");

    search.addEventListener("input", () => {
      const q = search.value.toLowerCase();
      results.innerHTML = "";
      if (!q) return;
      const matches = inventory.filter(it => it.item.toLowerCase().includes(q));
      matches.forEach(it => {
        const div = document.createElement("div");
        div.className = "item";
        div.textContent = `${it.item} (${it.unit})`;  // ðŸ‘ˆ Show unit in search results
        div.onclick = () => addItem(it);
        results.appendChild(div);
      });
    });

    function addItem(it) {
      const qty = prompt("Enter quantity:", "1");
      if (!qty) return;
      selected.push({ item: it.item, unit: it.unit, qty });
      renderSelected();
    }

    function removeItem(i) {
      selected.splice(i, 1);
      renderSelected();
    }

    function renderSelected() {
      selectedList.innerHTML = '';
      selected.forEach((it, i) => {
        const row = document.createElement('div');
        row.className = 'si';
        row.innerHTML = `
          <span style="flex:1;">
            ${it.item} â€” ${it.qty} ${it.unit || ''}
          </span>
          <button class="rm" onclick="removeItem(${i})">Remove</button>
        `;
        selectedList.appendChild(row);
      });

      hiddenSelectedField.value = selected.length
        ? `Selected items:\nâ€¢ ${selected.map(it => `${it.item} â€” ${it.qty} ${it.unit || ''}`).join('\nâ€¢ ')}`
        : '';
    }

    function sendWhatsApp() {
      const name = document.querySelector("input[name='name']").value;
      const phone = document.querySelector("input[name='phone']").value;
      const email = document.querySelector("input[name='email']").value;
      const msg = document.querySelector("textarea[name='message']").value;
      const items = hiddenSelectedField.value;

      const text = `Enquiry Details:\n\n${items}\n\nName: ${name}\nPhone: ${phone}\nEmail: ${email}\nMessage: ${msg}`;
      const url = `https://wa.me/918885750657?text=${encodeURIComponent(text)}`;
      window.open(url, "_blank");
    }
  </script>
</body>
</html> 
